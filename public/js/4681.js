(self.webpackChunk=self.webpackChunk||[]).push([[4681],{84681:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});const a={name:"Customers",data:function(){return{switch1:!0,tableHeaders:[{text:"#",align:"start",sortable:!1,value:"count"},{text:"Name",value:"name",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Orders",value:"orders",sortable:!0},{text:"City",value:"city",sortable:!1},{text:"Postal Code",value:"postal_code",sortable:!1},{text:"Date Registered",value:"date_registered",sortable:!0},{text:"Status",value:"status",sortable:!1}],customers:[],search:null,dialog:!1,changeStatus:!0,changeStatusCustomerId:null}},watch:{dialog:function(t){t||this.closeStatusChangeDialog()}},mounted:function(){this.getCustomers()},methods:{getCustomers:function(){var t=this;axios.get("/api/users/customers").then((function(e){t.customers=[];var s=e.data.customers,a=1;for(var o in s)t.customers.push({count:a,name:s[o].first_name+" "+s[o].last_name,email:s[o].email,orders:s[o].orders,city:s[o].city,postal_code:s[o].zip_code,date_registered:s[o].created_at,stat:s[o].stat,id:s[o].id}),a++;t.users=s}),(function(e){var s=e.response.data.message,a="";for(var o in s)a+=s[o];t.$toast.open({message:a,type:"error"})}))},changeStatusCustomerDialogOpen:function(t,e,s){this.changeStatus=e,this.changeStatusCustomerId=t,this.dialog=!0},closeStatusChangeDialog:function(){this.changeStatus=null,this.changeStatusCustomerId=null,this.dialog=!1},changeCustomerStatus:function(){var t=this,e={id:this.changeStatusCustomerId,status:this.changeStatus};axios.post("/api/users/change-status",e).then((function(e){t.closeStatusChangeDialog(),t.$snotify.success("User Status Updated",{closeOnClick:!1,pauseOnHover:!1,timeout:1e3,showProgressBar:!1}),setTimeout((function(){t.getCustomers()}),2e3)}),(function(e){var s=e.response.data.message,a="";for(var o in s)a+=s[o];t.$toast.open({message:a,type:"error"})}))}}};const o=(0,s(51900).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"mb-6"},[t._v("Customers")]),t._v(" "),s("div",{staticClass:"pa-4 pt-0 emb-card mb-6"},[s("v-row",[s("v-col",{attrs:{cols:"12",sm:"8",md:"5",lg:"5"}},[s("v-text-field",{attrs:{label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),s("div",{staticClass:" pa-4"},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.customers,"items-per-page":20,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-dialog",{attrs:{"max-width":"650px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("Are you sure you want to change this this customer status ?")]),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeStatusChangeDialog}},[t._v("Cancel")]),t._v(" "),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.changeCustomerStatus}},[t._v("OK")]),t._v(" "),s("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.status",fn:function(e){var a=e.item;return[s("v-switch",{attrs:{color:"success",value:a.stat,"input-value":a.stat},on:{change:function(e){return t.changeStatusCustomerDialogOpen(a.id,null!==e,e)}}})]}}])})],1)])}),[],!1,null,"747b3e7c",null).exports}}]);