(self.webpackChunk=self.webpackChunk||[]).push([[9461],{89461:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>n});const s={name:"Members",data:function(){return{switch1:!0,tableHeaders:[{text:"#",align:"start",sortable:!1,value:"count"},{text:"Name",value:"name",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Orders",value:"orders",sortable:!0},{text:"Membership",value:"membership",sortable:!1},{text:"Account Amount",value:"account_amount",sortable:!1},{text:"Date Registered",value:"date_registered",sortable:!0},{text:"Status",value:"status",sortable:!1},{text:"Actions",value:"actions",sortable:!1}],members:[],search:null,dialog:!1,changeStatus:!0,changeStatusCustomerId:null}},watch:{dialog:function(t){t||this.closeStatusChangeDialog()}},mounted:function(){this.getMembers()},methods:{getMembers:function(){var t=this;axios.get("/api/users/members").then((function(e){t.members=[];var a=e.data.members,s=1;for(var n in a)t.members.push({count:s,name:a[n].first_name+" "+a[n].last_name,email:a[n].email,orders:a[n].orders,city:a[n].city,membership:a[n].membership,account_amount:a[n].account_amount,date_registered:a[n].created_at,stat:a[n].stat,id:a[n].id}),s++;t.users=a}),(function(e){var a=e.response.data.message,s="";for(var n in a)s+=a[n];t.$toast.open({message:s,type:"error"})}))},changeStatusCustomerDialogOpen:function(t,e,a){this.changeStatus=e,this.changeStatusCustomerId=t,this.dialog=!0},closeStatusChangeDialog:function(){this.changeStatus=null,this.changeStatusCustomerId=null,this.dialog=!1},changeCustomerStatus:function(){var t=this,e={id:this.changeStatusCustomerId,status:this.changeStatus};axios.post("/api/users/change-status",e).then((function(e){t.closeStatusChangeDialog(),t.$snotify.success("User Status Updated",{closeOnClick:!1,pauseOnHover:!1,timeout:1e3,showProgressBar:!1}),setTimeout((function(){t.getCustomers()}),2e3)}),(function(e){var a=e.response.data.message,s="";for(var n in a)s+=a[n];t.$toast.open({message:s,type:"error"})}))}}};const n=(0,a(51900).Z)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h4",{staticClass:"mb-6"},[t._v("Members")]),t._v(" "),a("div",{staticClass:"pa-4 pt-0 emb-card mb-6"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8",md:"5",lg:"5"}},[a("v-text-field",{attrs:{label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t._v(" "),a("div",{staticClass:" pa-4"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.tableHeaders,items:t.members,"items-per-page":20,search:t.search},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-dialog",{attrs:{"max-width":"650px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("Are you sure you want to change this this customer status ?")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeStatusChangeDialog}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.changeCustomerStatus}},[t._v("OK")]),t._v(" "),a("v-spacer")],1)],1)],1)]},proxy:!0},{key:"item.account_amount",fn:function(e){var a=e.item;return[t._v("\n               "+t._s(a.account_amount.toFixed(2))+"\n            ")]}},{key:"item.status",fn:function(e){var s=e.item;return[a("v-switch",{attrs:{color:"success",value:s.stat,"input-value":s.stat},on:{change:function(e){return t.changeStatusCustomerDialogOpen(s.id,null!==e,e)}}})]}}])})],1)])}),[],!1,null,"03b2c4dc",null).exports}}]);